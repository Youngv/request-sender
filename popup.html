<!DOCTYPE html>
<html lang="en">

<head>
    <title>Webhook Sender</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="language-switcher">
        <span>Language:</span>
        <div class="language-option" data-lang="zh_CN">中文</div>
        <div class="language-option" data-lang="en">English</div>
    </div>

    <div class="container">
        <h1 data-i18n="appName">Webhook Sender</h1>

        <div class="tabs">
            <button class="tab-btn active" id="webhooks-tab" data-i18n="myWebhooks">My Webhooks</button>
            <button class="tab-btn" id="create-tab" data-i18n="createWebhook">Create Webhook</button>
            <button class="tab-btn" id="logs-tab" data-i18n="requestLogs">Request Logs</button>
        </div>

        <div class="tab-content">
            <!-- My Webhooks Tab -->
            <div class="tab-pane active" id="webhooks-content">
                <div class="webhook-list" id="webhook-list">
                    <!-- Webhooks will be added dynamically via JS -->
                    <div class="empty-state" id="empty-webhooks" data-i18n="noWebhooks">
                        No webhooks yet, please click "Create Webhook" button to add
                    </div>
                </div>
            </div>

            <!-- Create Webhook Tab -->
            <div class="tab-pane" id="create-content">
                <h2 id="form-title" data-i18n="createWebhook">Create Webhook</h2>
                <form id="webhook-form">
                    <div class="form-group">
                        <label for="webhook-name" data-i18n="name">Name</label>
                        <input type="text" id="webhook-name" data-i18n-placeholder="name"
                            placeholder="Enter webhook name" required>
                    </div>

                    <div class="form-group">
                        <label for="webhook-url" data-i18n="url">URL</label>
                        <input type="url" id="webhook-url" placeholder="https://example.com/webhook" required>
                    </div>

                    <div class="form-group">
                        <label for="webhook-method" data-i18n="method">HTTP Method</label>
                        <select id="webhook-method">
                            <option value="GET">GET</option>
                            <option value="POST" selected>POST</option>
                            <option value="PUT">PUT</option>
                            <option value="DELETE">DELETE</option>
                            <option value="PATCH">PATCH</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="webhook-content-type" data-i18n="contentType">Content Type</label>
                        <select id="webhook-content-type">
                            <option value="application/json" selected>JSON</option>
                            <option value="application/x-www-form-urlencoded">Form URL Encoded</option>
                            <option value="text/plain">Text</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="webhook-headers" data-i18n="headers">Headers (JSON format)</label>
                        <textarea id="webhook-headers" placeholder='{"Authorization": "Bearer token"}'></textarea>
                        <div class="field-help">
                            <p data-i18n="headersExample">Please use valid JSON format, e.g.: {"key": "value", "key2":
                                "value2"}</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="webhook-body" data-i18n="body">Request Body</label>
                        <textarea id="webhook-body" placeholder='{"key": "value"}'></textarea>
                        <div class="field-help">
                            <p data-i18n="bodyJsonHelp">When content type is JSON, please ensure using valid JSON format
                            </p>
                            <p data-i18n="bodyExample">Example: {"user": {"name": "John", "age": 30}}</p>
                        </div>
                    </div>

                    <!-- Dynamic Fields Section -->
                    <div class="form-group">
                        <label data-i18n="dynamicFields">Dynamic Fields</label>
                        <div class="field-help dynamic-fields-info">
                            <p data-i18n="dynamicFieldsHelp">The system will automatically detect placeholders in the
                                format {{fieldName}} in URL, headers or body, and prompt you to fill in values when
                                sending.</p>
                            <p data-i18n="dynamicFieldsExample">Example: {"user_id": "{{user_id}}"} or
                                https://api.example.com/users/{{user_id}}
                            </p>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn primary" data-i18n="save">Save</button>
                        <button type="button" class="btn" id="test-webhook" data-i18n="test">Test</button>
                    </div>
                </form>
            </div>

            <!-- Request Logs Tab -->
            <div class="tab-pane" id="logs-content">
                <div class="log-actions">
                    <button type="button" class="btn small" id="refresh-logs" data-i18n="refresh">Refresh</button>
                    <button type="button" class="btn small" id="clear-logs" data-i18n="clearLogs">Clear Logs</button>
                </div>
                <div class="logs-list" id="logs-list">
                    <div class="empty-state" id="empty-logs" data-i18n="noLogs">
                        No request logs yet
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Send Webhook Modal -->
    <div class="modal" id="send-modal">
        <div class="modal-content">
            <span class="close-btn" id="close-modal">&times;</span>
            <h2 data-i18n="fillParameters">Fill Parameter Values</h2>
            <p class="modal-description" data-i18n="paramDescription">This webhook contains parameters that need to be
                filled. Please provide values for the following parameters:</p>
            <form id="dynamic-form">
                <!-- Dynamic fields will be displayed here -->
            </form>
            <div class="form-actions">
                <button type="button" class="btn primary" id="send-with-values" data-i18n="send">Send</button>
                <button type="button" class="btn" id="cancel-send" data-i18n="cancel">Cancel</button>
            </div>
        </div>
    </div>

    <div class="modal" id="delete-modal">
        <div class="modal-content">
            <span class="close-btn" id="close-delete-modal">&times;</span>
            <h3 data-i18n="confirmDelete">Are you sure you want to delete this webhook?</h3>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="cancel-delete-btn"
                    data-i18n="cancel">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirm-delete-btn" data-i18n="delete">Delete</button>
            </div>
        </div>
    </div>

    <div class="modal" id="clear-logs-modal">
        <div class="modal-content">
            <span class="close-btn" id="close-clear-logs-modal">&times;</span>
            <h3 data-i18n="confirmClearLogs">Are you sure you want to clear all request logs?</h3>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="cancel-clear-logs-btn"
                    data-i18n="cancel">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirm-clear-logs-btn" data-i18n="clearLogs">Clear
                    Logs</button>
            </div>
        </div>
    </div>

    <script src="js/i18n.js"></script>
    <script src="js/languageSwitcher.js"></script>
    <script src="js/popup.js"></script>
</body>

</html>
